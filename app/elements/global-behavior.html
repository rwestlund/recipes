<!--
    Randy Westlund
    2016-07
-->

<script>
var constants = {};

constants.user_role_enum = {
    admin:      'Admin',
    moderator:  'Moderator',
    user:       'User',
    guest:      'Guest',
};

// Take an dictionary, return an array of values. This is defined outside the
// behavior so I can use it on constants.
var to_array = function(obj) {
    if (!obj) return [];
    return Object.keys(obj).map(k => obj[k]).sort();
};

// Provdide presorted lists.
constants.user_roles =      to_array(constants.user_role_enum);

var recipe_behaviors = recipe_behaviors || {};
recipe_behaviors.global_behavior = {
    properties: {
        constants: {
            type: Object,
            value: constants,
        },
    },
    isUserAdmin: function(role) {
        return (role === this.constants.userRoleEnum.admin);
    },
    isUserGuest: function(role) {
        return (role === this.constants.userRoleEnum.guest);
    },
    long_date: function(d) {
        var date = new Date(d);
        return date.toDateString() + ' ' + date.toLocaleTimeString();
    },
    to_array: to_array,
    equal: function(a, b) {
        return a === b;
    },
    first_defined: function(a, b) {
        return a || b;
    },

};
</script>
