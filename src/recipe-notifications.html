<!--
    Copyright (c) 2016-2017, Randy Westlund. All rights reserved.
    This code is under the BSD-2-Clause license.
-->
<!-- This module listens to toast signals and displays them so that not every
     element needs a paper-toast. -->

<link rel="import" href="../bc/paper-toast/paper-toast.html">
<link rel="import" href="../bc/polymer/polymer.html">

<link rel="import" href="global-styles.html">

<dom-module id="recipe-notifications">
    <template>
        <style include="global-styles"></style>
        <style>
            :host {
                display: block;
            }
        </style>

        <paper-toast id="success_toast"
                class="success-toast"
                horizontal-align="left"
                horizontal-offset="20"
                no-cancel-on-esc-key
                duration="4000">
        </paper-toast>
        <paper-toast id="error_toast"
                class="error-toast"
                horizontal-align="left"
                horizontal-offset="20"
                no-cancel-on-esc-key
                duration="4000">
        </paper-toast>
    </template>

    <script>
        (function () {
            'use strict';
            Polymer({
                is: 'recipe-notifications',
                attached: function() {
                    this._success_listener = this.show_success_toast.bind(this);
                    this._error_listener = this.show_error_toast.bind(this);
                    window.addEventListener("success-toast",
                            this._success_listener);
                    window.addEventListener("error-toast",
                            this._error_listener);
                },
                // Remove listeners to avoid memory leaks.
                detached: function() {
                    window.removeEventListener("success-toast",
                            this._success_listener);
                    window.removeEventListener("error-toast",
                            this._error_listener);
                },
                show_success_toast: function(e) {
                    this.$.success_toast.text = e.detail;
                    this.$.success_toast.show();
                },
                show_error_toast: function(e) {
                    this.$.error_toast.text = e.detail;
                    this.$.error_toast.show();
                },
            });
        })();
    </script>
</dom-module>
