<!--
    Copyright (c) 2016-2018, Randy Westlund. All rights reserved.
    This code is under the BSD-2-Clause license.
-->
<!-- This module listens to toast signals and displays them so that not every
     element needs a paper-toast. -->

<link rel="import" href="../bc/paper-toast/paper-toast.html">
<link rel="import" href="../bc/polymer/polymer-element.html">
<link rel="import" href="../bc/polymer/lib/mixins/gesture-event-listeners.html">

<link rel="import" href="global-styles.html">

<dom-module id="recipe-notifications">
    <template>
        <style include="global-styles"></style>
        <style>
            :host {
                display: block;
            }
        </style>

        <paper-toast id="success_toast"
                class="success-toast"
                horizontal-align="left"
                horizontal-offset="20"
                no-cancel-on-esc-key
                duration="4000">
        </paper-toast>
        <paper-toast id="error_toast"
                class="error-toast"
                horizontal-align="left"
                horizontal-offset="20"
                no-cancel-on-esc-key
                duration="4000">
        </paper-toast>
    </template>

<script>
"use strict";
class RecipeNotifications extends
        Polymer.GestureEventListeners(Polymer.Element) {
    static get is() { return "at-notifications"; }
    connectedCallback() {
        super.connectedCallback();
        this._success_listener = this.show_success_toast.bind(this);
        window.addEventListener("success-toast", this._success_listener);
        this._error_listener = this.show_error_toast.bind(this);
        window.addEventListener("error-toast", this._error_listener);
    }
    disconnectedCallback() {
        super.disconnectedCallback();
        window.removeEventListener("success-toast", this._success_listener);
        window.removeEventListener("error-toast", this._error_listener);
    }
    show_success_toast(e) {
        this.$.success_toast.text = e.detail;
        this.$.success_toast.show();
    }
    show_error_toast(e) {
        this.$.error_toast.text = e.detail;
        this.$.error_toast.show();
    }
}
customElements.define(RecipeNotifications.is, RecipeNotifications);
</script>
</dom-module>
